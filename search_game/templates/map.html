{% extends 'base_template.html' %}
{% load staticfiles %}
{% load leaflet_tags %}

{% block title %}Map{% endblock title %}
{% block style %}
    {% leaflet_js %}
    {% leaflet_css %}
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock style %}

{% block content %}
    <h1>Where would you like to go next?</h1>
    <form method="post" action="">
        {% csrf_token %}
        {{ form }}

        <input value="Search" type="submit">
    </form>
    <script>
        var map = L.map('map').setView([{{ current.latitude }}, {{ current.longitude }}], 2);
        L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
            maxZoom: 11,
            minZoom: 2
        }).addTo(map);
        var current = L.marker([{{ current.latitude }}, {{ current.longitude }}]).addTo(map);
        current.bindPopup('<b>{{ current.name }}, {{ current.country }}</b><br>You are here.').openPopup();
        var destination = L.marker([{{ destination.latitude }}, {{ destination.longitude }}], {draggable:'true'});
    </script>
    <script type="text/javascript">
    function map_init_basic (map, options) {

        L.marker([50.5, 30.5]).addTo(map);

    }
</script>

    {% leaflet_map "" %}
{% endblock content %}